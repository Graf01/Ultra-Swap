<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for contracts/AutoStaking.sol</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../index.html">all files</a> / <a href="index.html">contracts/</a> AutoStaking.sol
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>0/72</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>0/26</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>0/19</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>0/73</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">// SPDX-License-Identifier: MIT
&nbsp;
pragma solidity ^0.8.12;
&nbsp;
import "@openzeppelin/contracts/access/Ownable.sol";
import "@openzeppelin/contracts/security/Pausable.sol";
import "@openzeppelin/contracts/security/ReentrancyGuard.sol";
import "@openzeppelin/contracts/token/ERC20/IERC20.sol";
import "@openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol";
import "./interfaces/IStaking.sol";
import "hardhat/console.sol";
&nbsp;
contract AutoStaking is Ownable, Pausable, ReentrancyGuard {
    using SafeERC20 for IERC20;
&nbsp;
    struct UserInfo {
        uint256 shares;
        uint256 lastDepositedTime;
    }
&nbsp;
    mapping(address =&gt; UserInfo) public userInfo;
&nbsp;
    IERC20 public immutable TOKEN;
    IStaking public immutable STAKING;
&nbsp;
    uint256 public fees;
&nbsp;
    uint256 public totalShares;
&nbsp;
    uint256 public performanceFee = 200;
    uint256 public restakeReward = 25;
    uint256 public withdrawFee = 10;
    uint256 public withdrawFeePeriod = 72 hours;
&nbsp;
    event Deposit(address indexed sender, uint256 amount, uint256 shares, uint256 lastDepositedTime);
    event Withdraw(address indexed sender, uint256 amount, uint256 shares);
    event Restake(address indexed sender, uint256 performanceFee, uint256 restakeReward);
&nbsp;
<span class="fstat-no" title="function not covered" >    constructor(IERC20 _token, IStaking _staking) {</span>
<span class="cstat-no" title="statement not covered" >        TOKEN = _token</span>;
<span class="cstat-no" title="statement not covered" >        STAKING = _staking</span>;
<span class="cstat-no" title="statement not covered" >        _token.safeApprove(address(_staking), type(uint256).max)</span>;
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    modifier notContract() {</span>
<span class="cstat-no" title="statement not covered" >        require(!Address.isContract(_msgSender()), "Contract not allowed")</span>;
<span class="cstat-no" title="statement not covered" >        require(_msgSender() == tx.origin, "Contract not allowed")</span>;
        _;
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function calculateRestakeReward() external view returns(uint256) {</span>
<span class="cstat-no" title="statement not covered" >        return ((STAKING.pendingReward(0, address(this)) + _balance()) * restakeReward) / 10000;</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function deposit(uint256 _amount) external whenNotPaused nonReentrant notContract {</span>
<span class="cstat-no" title="statement not covered" >        require(_amount &gt; 0, "Nothing to deposit")</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        uint256 pool = total();</span>
<span class="cstat-no" title="statement not covered" >        TOKEN.safeTransferFrom(_msgSender(), address(this), _amount)</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        uint256 currentShares;</span>
<span class="cstat-no" title="statement not covered" >        if (totalShares != 0) {</span>
<span class="cstat-no" title="statement not covered" >            currentShares = _amount * totalShares / pool</span>;
        } else {
<span class="cstat-no" title="statement not covered" >            currentShares = _amount</span>;
        }
<span class="cstat-no" title="statement not covered" >        require(currentShares &gt; 0, "Too low amount to deposit")</span>;
<span class="cstat-no" title="statement not covered" >        UserInfo storage user = userInfo[_msgSender()];</span>
<span class="cstat-no" title="statement not covered" >        user.shares += currentShares</span>;
<span class="cstat-no" title="statement not covered" >        user.lastDepositedTime = block.timestamp</span>;
<span class="cstat-no" title="statement not covered" >        totalShares += currentShares</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        _deposit()</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        emit Deposit(_msgSender(), _amount, currentShares, block.timestamp);</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function restake() external whenNotPaused nonReentrant notContract {</span>
<span class="cstat-no" title="statement not covered" >        STAKING.harvest(0, address(this))</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        uint256 bal = _balance();</span>
<span class="cstat-no" title="statement not covered" >        uint256 currentPerformanceFee = bal * performanceFee / 10000;</span>
<span class="cstat-no" title="statement not covered" >        fees += currentPerformanceFee</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        uint256 currentRestakeReward = bal * restakeReward / 10000;</span>
<span class="cstat-no" title="statement not covered" >        TOKEN.safeTransfer(_msgSender(), currentRestakeReward)</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        _deposit()</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        emit Restake(_msgSender(), currentPerformanceFee, currentRestakeReward);</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function withdraw(uint256 _shares) public nonReentrant notContract {</span>
<span class="cstat-no" title="statement not covered" >        UserInfo storage user = userInfo[_msgSender()];</span>
<span class="cstat-no" title="statement not covered" >        require(_shares &gt; 0, "Nothing to withdraw")</span>;
<span class="cstat-no" title="statement not covered" >        require(_shares &lt;= user.shares, "Withdraw amount exceeds balance")</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        uint256 currentAmount = total() * _shares / totalShares;</span>
<span class="cstat-no" title="statement not covered" >        user.shares -= _shares</span>;
<span class="cstat-no" title="statement not covered" >        totalShares -= _shares</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        _getAmountNeeded(currentAmount)</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        if (block.timestamp &lt; user.lastDepositedTime + withdrawFeePeriod) {</span>
<span class="cstat-no" title="statement not covered" >            uint256 currentWithdrawFee = currentAmount * withdrawFee / 10000;</span>
<span class="cstat-no" title="statement not covered" >            fees += currentWithdrawFee</span>;
<span class="cstat-no" title="statement not covered" >            currentAmount -= currentWithdrawFee</span>;
        }
<span class="cstat-no" title="statement not covered" >        console.log("currentAmount = ", currentAmount)</span>;
        // console.log("needed     = ", needed);
&nbsp;
&nbsp;
<span class="cstat-no" title="statement not covered" >        TOKEN.safeTransfer(_msgSender(), currentAmount)</span>;
&nbsp;
&nbsp;
&nbsp;
<span class="cstat-no" title="statement not covered" >        emit Withdraw(_msgSender(), currentAmount, _shares);</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function doApprove() external {</span>
<span class="cstat-no" title="statement not covered" >        TOKEN.safeApprove(address(STAKING), type(uint256).max)</span>;
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function setPerformanceFee(uint256 _performanceFee) external onlyOwner {</span>
<span class="cstat-no" title="statement not covered" >        performanceFee = _performanceFee</span>;
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function setRestakeReward(uint256 _restakeReward) external onlyOwner {</span>
<span class="cstat-no" title="statement not covered" >        restakeReward = _restakeReward</span>;
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function setWithdrawFee(uint256 _withdrawFee) external onlyOwner {</span>
<span class="cstat-no" title="statement not covered" >        withdrawFee = _withdrawFee</span>;
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function setWithdrawFeePeriod(uint256 _withdrawFeePeriod) external onlyOwner {</span>
<span class="cstat-no" title="statement not covered" >        withdrawFeePeriod = _withdrawFeePeriod</span>;
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function emergencyWithdraw() external onlyOwner {</span>
<span class="cstat-no" title="statement not covered" >        STAKING.emergencyWithdraw(0)</span>;
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function getToken(IERC20 _token) external onlyOwner {</span>
<span class="cstat-no" title="statement not covered" >        if (_token == TOKEN) {</span>
<span class="cstat-no" title="statement not covered" >            _token.safeTransfer(_msgSender(), fees)</span>;
<span class="cstat-no" title="statement not covered" >            fees = 0</span>;
        }
        else {
<span class="cstat-no" title="statement not covered" >            _token.safeTransfer(_msgSender(), _token.balanceOf(address(this)))</span>;
        }
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function pause() external onlyOwner whenNotPaused {</span>
<span class="cstat-no" title="statement not covered" >        _pause()</span>;
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function unpause() external onlyOwner whenPaused {</span>
<span class="cstat-no" title="statement not covered" >        _unpause()</span>;
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function total() public view returns(uint256) {</span>
<span class="cstat-no" title="statement not covered" >        (uint256 amount, , ) = STAKING.userInfo(0, address(this));</span>
<span class="cstat-no" title="statement not covered" >        console.log("AutoStaking: total(): amount  = ", amount)</span>;
<span class="cstat-no" title="statement not covered" >        console.log("AutoStaking: total(): fees    = ", fees)</span>;
<span class="cstat-no" title="statement not covered" >        console.log("AutoStaking: total(): balance = ", TOKEN.balanceOf(address(this)))</span>;
<span class="cstat-no" title="statement not covered" >        return _balance() + amount;</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function _getAmountNeeded(uint256 amount) private {</span>
<span class="cstat-no" title="statement not covered" >        if (_balance() &gt;= amount) {</span>
<span class="cstat-no" title="statement not covered" >            return;</span>
        }
<span class="cstat-no" title="statement not covered" >        uint256 needed = amount - _balance();</span>
<span class="cstat-no" title="statement not covered" >        if (STAKING.pendingReward(0, address(this)) &gt; 0) {</span>
<span class="cstat-no" title="statement not covered" >            STAKING.harvest(0, address(this))</span>;
<span class="cstat-no" title="statement not covered" >            if (_balance() &gt;= amount) {</span>
<span class="cstat-no" title="statement not covered" >                return;</span>
            }
<span class="cstat-no" title="statement not covered" >            needed = amount - _balance()</span>;
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        STAKING.withdraw(0, needed, address(this))</span>;
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function _balance() private view returns(uint256) {</span>
<span class="cstat-no" title="statement not covered" >        return TOKEN.balanceOf(address(this)) - fees;</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function _deposit() private {</span>
<span class="cstat-no" title="statement not covered" >        uint256 balance = _balance();</span>
<span class="cstat-no" title="statement not covered" >        if (balance &gt; 0) {</span>
<span class="cstat-no" title="statement not covered" >            STAKING.deposit(0, balance, address(this))</span>;
        }
    }
}</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Thu Apr 21 2022 18:13:05 GMT+0700 (Novosibirsk Standard Time)
</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
